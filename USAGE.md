# 📖 使用指南

## 快速开始

### 方法一：Docker（最简单）

```bash
# 1. 进入项目目录
cd zhenhuan_code

# 2. 启动 Docker 容器
docker-compose up

# 3. 在浏览器打开
http://localhost:4000
```

首次启动会自动：
- 安装所有依赖包（React, D3.js, epub.js 等）
- 构建项目
- 启动开发服务器

### 方法二：本地开发

```bash
# 1. 安装 Node.js 18+
# 下载：https://nodejs.org/

# 2. 安装依赖
npm install

# 3. 启动开发服务器
npm run dev

# 4. 在浏览器打开显示的地址（通常是 http://localhost:5173）
```

## 🎯 如何使用

### 阅读电子书

1. **翻页**：
   - 点击右上角"上一页"/"下一页"按钮
   - 或使用键盘左右箭头键 ← →

2. **跳转章节**：
   - 点击底部"目录"展开章节列表
   - 点击任意章节标题快速跳转

3. **查看进度**：
   - 顶部显示"当前页 / 总页数"

### 使用人物关系图谱

1. **查看人物**：
   - 图谱会随着阅读自动显示已出现的人物
   - 读到哪里，图谱就显示哪些角色

2. **筛选阵营**：
   - 左上角控制面板选择阵营
   - 可选：全部、皇室成员、皇后阵营、甄嬛阵营、华妃阵营

3. **查看人物详情**：
   - 鼠标悬停在节点上
   - 弹出窗口显示：姓名、职位、阵营、登场章节

4. **操作图谱**：
   - **拖拽节点**：鼠标拖动单个人物节点
   - **缩放**：鼠标滚轮放大/缩小
   - **平移**：鼠标拖动空白处移动整个图谱
   - **重置视图**：点击"重置视图"按钮恢复初始状态

5. **切换标签**：
   - 点击"隐藏标签"按钮隐藏人名和关系
   - 再次点击"显示标签"恢复

6. **查看进度**：
   - 控制面板显示"已发现人物：X / 44"
   - 显示当前阅读到的章节数

## 🎨 界面说明

### 左侧（70%）- 阅读器
```
┌─────────────────────────────────────┐
│  甄嬛传 - 流潋紫    [上一页] [下一页] │ ← 顶部控制栏
├─────────────────────────────────────┤
│                                     │
│      EPUB 内容显示区域               │
│                                     │
│                                     │
├─────────────────────────────────────┤
│  📑 目录 (展开/收起)                 │ ← 底部章节导航
└─────────────────────────────────────┘
```

### 右侧（30%）- 关系图谱
```
┌─────────────────────┐
│ ┌───────────────┐   │
│ │ 控制面板      │   │ ← 左上角
│ │ - 阵营筛选    │   │
│ │ - 重置视图    │   │
│ │ - 切换标签    │   │
│ │ - 当前章节    │   │
│ │ - 已发现人物  │   │
│ └───────────────┘   │
│                     │
│   人物关系图谱       │ ← 中央区域
│   (D3.js 力导向图)   │
│                     │
│ ┌───────────────┐   │
│ │ 阵营图例      │   │ ← 左下角
│ │ 🔴 皇室成员   │   │
│ │ 🔵 皇后阵营   │   │
│ │ 🟢 甄嬛阵营   │   │
│ │ 🟡 华妃阵营   │   │
│ └───────────────┘   │
└─────────────────────┘
```

## 💡 使用技巧

### 高效阅读
1. 先浏览目录，了解章节结构
2. 使用箭头键快速翻页
3. 观察右侧图谱变化，理解人物关系

### 理解人物关系
1. 先阅读一章，观察新增人物
2. 使用阵营筛选专注某一派系
3. 拖拽节点整理布局，方便查看
4. 悬停查看详细信息

### 复杂宫斗场景
1. 筛选"皇后阵营"查看她的阵营
2. 筛选"甄嬛阵营"对比势力
3. 筛选"华妃阵营"了解对手
4. 选择"全部"查看整体格局

## 🔧 常见问题

### Q: 图谱显示空白？
A: 继续阅读几页，系统需要扫描文本检测人物名字。

### Q: 人物节点重叠？
A:
1. 手动拖拽节点调整位置
2. 点击"重置视图"重新布局
3. 缩小视图查看全局

### Q: 找不到某个人物？
A:
1. 检查是否已读到该人物登场的章节
2. 使用阵营筛选定位
3. 查看"已发现人物"计数

### Q: 页面加载慢？
A:
1. EPUB 文件较大，首次加载需要 3-5 秒
2. 确保网络畅通（Docker 需要下载镜像）
3. 关闭其他占用资源的应用

## 🎬 推荐使用流程

**第一次使用**：
1. 启动项目，等待加载完成
2. 浏览目录，选择第一章开始阅读
3. 翻几页后，观察右侧图谱出现"甄嬛"节点
4. 继续阅读，看到更多人物陆续加入
5. 尝试点击阵营筛选，了解各派系

**深度阅读**：
1. 读到重要情节时，暂停查看图谱
2. 使用阵营筛选分析人物关系
3. 悬停查看人物详情，理解角色定位
4. 对比不同阵营的势力对比

## 📞 反馈与支持

如有问题或建议，请查看项目 README.md 文件。

祝您阅读愉快！ 📚
